# Focal Webdoc Revamp Plan

Goal: turn the MkDocs site into a production-grade docs hub that mirrors the codebase and design docs, fixes current UX gaps, and stays maintainable via automation.

## Current Issues (from repo scan)
- Homepage is the MkDocs default; no Focal context or links into the system.
- Nav points to files that do not exist (e.g., `project_specs/*/checklists`) and has redundant deep nesting that hides key flows (Alignment, API, Memory).
- Styling is untouched (`extra.css` empty); Material defaults make the site feel generic.
- Reference docs are autogenerated but uncurated (private helpers exposed, no crosslinks or stability labels).
- `webdoc/docs` duplicates content from `docs/` without a sync story; `site/` contains built artifacts that should be regenerated, not committed.

## Proposed Information Architecture
- **Home**: Value prop, quick start, architecture diagram, links to the three primary journeys (Build an agent, Operate it, Extend it).
- **Concepts**: Vision, architecture overview, alignment engine, memory layer, configuration system, observability, selection strategies, customer profile.
- **How-To Guides**: Task-based guides tied to code: configure providers, publish an agent, run the alignment pipeline end-to-end, migrate scenarios, ingest memory, operate the API (chat, CRUD), observability setup.
- **Reference**: API (OpenAPI excerpt plus route pages), configuration schema (from `config/models`), provider matrices, store interfaces, alignment pipeline contracts, autogenerated Python API reference (curated).
- **Specs & Plans**: Implementation plan phase summaries, project specs aligned to phases (001–009), with checklists that actually exist.

## Execution Plan (phased)
1) **Foundational cleanup**
   - Replace `webdoc/docs/index.md` with a Focal landing page derived from `README.md`, `docs/vision.md`, and `docs/architecture/overview.md`.
   - Fix nav to point only to existing files; either add missing checklist stubs or remove the broken entries.
   - Remove committed build artifacts (`webdoc/site`); add ignore rules if needed.
2) **Content sourcing and sync**
   - Make `webdoc/docs/project_docs` source-of-truth mirrors of `docs/` via a documented sync script (rsync or `cp --parents`) and annotate divergences.
   - For specs, ensure each phase (001–009) has the same structure: overview, plan, tasks, data model, research; add missing checklists where nav expects them.
   - Add a short “How this maps to the codebase” block at the top of each major doc, pointing to the relevant modules (e.g., `focal/alignment/engine.py`, `focal/api/routes/chat.py`, `focal/config/models/`).
3) **MkDocs configuration and UX**
   - Streamline nav into the IA above; use tabs for top-level sections and keep depth to ≤3.
   - Enable helpful Material features/plugins (search suggestions already on; add `navigation.instant`, `content.action.edit`, `git-revision-date-localized`, `minify` if compatible).
   - Add `extra.css` for typography (non-default font pair), spacing, and callouts; define a consistent accent color and code block styling.
4) **Reference generation hardening**
   - Update `pydoc-markdown.yml` to exclude private members, include module docstrings, and add frontmatter that links back to concepts/how-to guides.
   - Add an OpenAPI-to-Markdown export step for REST endpoints (FastAPI schema) to complement the per-route pages.
   - Tag reference pages with stability (`experimental`, `beta`, `stable`) pulled from code annotations or a small map.
5) **Quality and review gates**
   - Add a `make docs` or `uv run python generate_docs.py && uv run mkdocs build` target; fail if nav has missing files.
   - Document a review checklist (style, accuracy vs. code, tenant-safety notes, config paths, log redaction) and keep it in `webdoc/docs/CONTRIBUTING.md` or similar.
   - Add screenshots of key flows (Alignment pipeline diagram, API request/response examples) and ensure assets live under `webdoc/docs/assets/`.
6) **Operationalization**
   - Note how to serve locally (`webdoc/run_docs.sh`), expected port, and how to update versioned docs.
   - Plan CI hook to build docs on PR to catch broken links.

## Deliverables per phase
- 1) Clean homepage, fixed nav, no broken links, `site/` removed from repo.
- 2) Synced project_docs/specs with clear code pointers and valid checklists.
- 3) Updated `mkdocs.yml` with new IA and UX features; `extra.css` with the agreed visual system.
- 4) Curated reference generation pipeline plus OpenAPI export docs.
- 5) Make/uv targets and contributor checklist; assets added.
- 6) Local/CI instructions documented.

## Dependencies and references
- Core architecture and pipeline: `focal/alignment/engine.py`, `focal/alignment/result.py`, `focal/alignment/*`.
- API surface: `focal/api/app.py`, `focal/api/routes/*`, `focal/api/models/*`.
- Config models and loading: `focal/config/models/*`, `focal/config/loader.py`, `focal/config/settings.py`.
- Stores and providers: `focal/*/stores/*`, `focal/providers/*`.
- Observability: `focal/observability/*`.
- Implementation sequencing: `IMPLEMENTATION_PLAN.md` (phase alignment) and `docs/doc_skeleton.md`.
